"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[592],{8896:(x,v,c)=>{c.d(v,{Z:()=>d});var l=c(2223),u=c(3144);let d=(()=>{class i{constructor(r){this.http=r,this.serverUrl="http://eberride-env.eba-83w3w3ik.ap-south-1.elasticbeanstalk.com"}getcountryData(){return this.http.get(`${this.serverUrl}/countrydata`)}addcity(r){return this.http.post(`${this.serverUrl}/cityadd`,r)}getcity(r,p){return this.http.get(`${this.serverUrl}/citydata`,{params:{page:r,limit:p}})}updateCity(r,p){return console.log(r),console.log(p),this.http.put(`${this.serverUrl}/cityupdate/${r}`,p)}getCityPolygons(r){return console.log(r),this.http.get(`${this.serverUrl}/coordinates/${r}`)}}return i.\u0275fac=function(r){return new(r||i)(l.LFG(u.eN))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},34:(x,v,c)=>{c.d(v,{K:()=>d});var l=c(2223),u=c(3144);let d=(()=>{class i{constructor(r){this.http=r,this.serverUrl="http://eberride-env.eba-83w3w3ik.ap-south-1.elasticbeanstalk.com"}getride(r,p,h,_,b,m){return this.http.post(`${this.serverUrl}/ridesinfo`,{page:r,limit:p,search:h,statusfilter:_,vehiclefilter:b,sortOrder:m})}getMatchedDriverdata(r){return this.http.post(`${this.serverUrl}/assigneddriverdata`,r)}}return i.\u0275fac=function(r){return new(r||i)(l.LFG(u.eN))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},4146:(x,v,c)=>{c.d(v,{s:()=>u});var l=c(2223);let u=(()=>{class d{constructor(){}}return d.\u0275fac=function(g){return new(g||d)},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},6213:(x,v,c)=>{c.d(v,{R:()=>d});var l=c(2223),u=c(3144);let d=(()=>{class i{constructor(r){this.http=r,this.serverUrl="http://eberride-env.eba-83w3w3ik.ap-south-1.elasticbeanstalk.com"}get_setting_data(){return this.http.get(`${this.serverUrl}/settingdata`)}updateSetting(r){return this.http.put(`${this.serverUrl}/updatesetting`,r)}}return i.\u0275fac=function(r){return new(r||i)(l.LFG(u.eN))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},9342:(x,v,c)=>{c.d(v,{f:()=>d});var l=c(2223),u=c(3144);let d=(()=>{class i{constructor(r){this.http=r,this.serverUrl="http://eberride-env.eba-83w3w3ik.ap-south-1.elasticbeanstalk.com"}registerVehicle(r){return this.http.post(`${this.serverUrl}/vehicleadd`,r)}getvehicleData(){return this.http.get(`${this.serverUrl}/vehicledata`)}updateVehicle(r,p){return console.log(r),this.http.put(`${this.serverUrl}/updateVehicle/${r}`,p)}}return i.\u0275fac=function(r){return new(r||i)(l.LFG(u.eN))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},1484:(x,v,c)=>{c.d(v,{g:()=>D});var l=c(5861),u=c(5580),d="https://js.stripe.com/v3",i=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,g="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",_=null,S=Promise.resolve().then(function(){return s=null,null!==_||(_=new Promise(function(e,n){if(typeof window>"u"||typeof document>"u")e(null);else if(window.Stripe&&s&&console.warn(g),window.Stripe)e(window.Stripe);else try{var o=function(){for(var s=document.querySelectorAll('script[src^="'.concat(d,'"]')),e=0;e<s.length;e++){var n=s[e];if(i.test(n.src))return n}return null}();o&&s?console.warn(g):o||(o=function(s){var e=s&&!s.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(d).concat(e);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(n),n}(s)),o.addEventListener("load",function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}),o.addEventListener("error",function(){n(new Error("Failed to load Stripe.js"))})}catch(f){return void n(f)}})),_;var s}),w=!1;S.catch(function(a){w||console.warn(a)});var t=c(2223),y=c(3144),U=c(2018);let M=(()=>{class a{constructor(e){this.http=e,this.serverUrl="http://eberride-env.eba-83w3w3ik.ap-south-1.elasticbeanstalk.com"}getcard(e){return this.http.get(`${this.serverUrl}/getcard/`+e)}deletecard(e){return this.http.delete(`${this.serverUrl}/deletecard/`+e)}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(y.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var k=c(4755),O=c(1728);function E(a,s){1&a&&(t.TgZ(0,"span",23),t._uU(1,"Default"),t.qZA())}function T(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,f=t.oxw(2);return t.KtG(f.setdefaultCard(o.customer,o.id))}),t._uU(1,"Set Default"),t.qZA()}}function Z(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",17)(1,"span"),t._uU(2),t.qZA(),t._UZ(3,"img",18),t.TgZ(4,"div",19),t._uU(5),t.qZA(),t.TgZ(6,"div",19),t._uU(7),t.qZA(),t.TgZ(8,"div")(9,"button",20),t.NdJ("click",function(){const f=t.CHM(e).$implicit,C=t.oxw(2);return t.KtG(C.deleteCard(f.id))}),t._uU(10,"Delete"),t.qZA()(),t.YNc(11,E,2,0,"span",21),t.YNc(12,T,2,0,"button",22),t.qZA()}if(2&a){const e=s.$implicit,n=s.index;t.xp6(2),t.hij("",n+1,"."),t.xp6(3),t.hij("**** **** **** ",e.card.last4,""),t.xp6(2),t.AsE("",e.card.exp_month," / ",e.card.exp_year,""),t.xp6(4),t.Q6J("ngIf",1==e.isdefalut),t.xp6(1),t.Q6J("ngIf",0==e.isdefalut)}}function A(a,s){if(1&a&&(t.TgZ(0,"div",15),t.YNc(1,Z,13,6,"div",16),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.carddata)}}let D=(()=>{class a{constructor(e,n,o,f,C){this.dialogRef=e,this.data=n,this.http=o,this.toster=f,this._stripeService=C,this.cardlist=!0,this.carddata=[]}ngOnInit(){var e=this;return(0,l.Z)(function*(){e.userdata=e.data.userdata,e.userid=e.userdata._id,e.stripe=yield function(){for(var s=arguments.length,e=new Array(s),n=0;n<s;n++)e[n]=arguments[n];w=!0;var o=Date.now();return S.then(function(f){return function(s,e,n){if(null===s)return null;var o=s.apply(void 0,e);return function(s,e){!s||!s._registerWrapper||s._registerWrapper({name:"stripe-js",version:"1.54.2",startTime:e})}(o,n),o}(f,e,o)})}("pk_test_51NZeiUANXK9scyulUjawM5Gzvx6F6MOm8nzHj96fghdbp1d6bOwX6ttQBrtNXXHAi5S5ga7RH7MHyRwpqUXFSJ6Q00kvn8Jkgu"),e.elements=e.stripe.elements(),e.cardElement=e.elements.create("card"),e.cardElement.mount("#card-element"),e.getCard(e.userid)})()}addCard(e){var n=this;return(0,l.Z)(function*(){const o=yield n.stripe.createToken(n.cardElement),f=yield o.token;console.log("succes: ",yield o.token),console.log("Token:",f),yield fetch(`http://eberride-env.eba-83w3w3ik.ap-south-1.elasticbeanstalk.com/addcard/${e}`,{method:"POST",headers:{"Content-type":"Application/json"},body:JSON.stringify({token:f})}),n.getCard(n.userid)})()}getCard(e){this._stripeService.getcard(e).subscribe({next:o=>{this.carddata=o.paymentMethodsData,console.log(this.carddata)},error:o=>{console.log(o)}})}deleteCard(e){console.log(e),this._stripeService.deletecard(e).subscribe({next:n=>{this.toster.success(n.message),this.getCard(this.userid)},error:n=>{console.log(n)}})}setdefaultCard(e,n){var o=this;return(0,l.Z)(function*(){console.log(e),console.log(n),o.http.patch(`http://eberride-env.eba-83w3w3ik.ap-south-1.elasticbeanstalk.com/setdefaultcard/${e}`,{cardId:n}).subscribe(f=>{console.log(f),o.isDefault=n,o.getCard(o.userid)},f=>{console.error("Error:",f)})})()}closeDialog(){this.dialogRef.close()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(u.so),t.Y36(u.WI),t.Y36(y.eN),t.Y36(U._W),t.Y36(M))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-stripe"]],decls:25,vars:1,consts:[[1,"container"],[1,"circles"],[1,"circle","circle-1"],[1,"circle","circle-2"],[1,"cardtemplate"],[1,"visa_logo"],["src","https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/visa.png","alt",""],[1,"visa_info"],["src","https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/chip.png","alt",""],[1,"visa_crinfo"],["id","card-element",1,"stripecard"],["class","m-2",4,"ngIf"],["align","end"],["id","submit","mat-raised-button","",1,"addcardbtn",3,"click"],["mat-raised-button","",1,"cancelbtn","mx-4",3,"click"],[1,"m-2"],["class","d-flex align-items-center text-center border p-2 rounded mb-2",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","text-center","border","p-2","rounded","mb-2"],["src","../../../assets/images/visa-card-logo-9.png",1,"ms-3",2,"height","15px"],[1,"ms-5"],[1,"deletecard","ms-5",3,"click"],["class","defaultcard",4,"ngIf"],["class","setdefaultcard",3,"click",4,"ngIf"],[1,"defaultcard"],[1,"setdefaultcard",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-dialog-content")(1,"div",0)(2,"div",1),t._UZ(3,"div",2)(4,"div",3),t.qZA(),t.TgZ(5,"div",4)(6,"div",5),t._UZ(7,"img",6),t.qZA(),t.TgZ(8,"div",7),t._UZ(9,"img",8),t.TgZ(10,"p"),t._uU(11,"4586 7985 9271 6388"),t.qZA()(),t.TgZ(12,"div",9)(13,"p"),t._uU(14,"07/23"),t.qZA(),t.TgZ(15,"p"),t._uU(16,"Prashant Rai"),t.qZA()()()(),t._UZ(17,"div",10),t.TgZ(18,"div"),t.YNc(19,A,2,1,"div",11),t.qZA()(),t.TgZ(20,"mat-dialog-actions",12)(21,"button",13),t.NdJ("click",function(){return n.addCard(n.userid)}),t._uU(22,"Add Card"),t.qZA(),t.TgZ(23,"button",14),t.NdJ("click",function(){return n.closeDialog()}),t._uU(24,"Cancel"),t.qZA()()),2&e&&(t.xp6(19),t.Q6J("ngIf",n.carddata))},dependencies:[k.sg,k.O5,u.xY,u.H8,O.lW],styles:['@import"https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;600;700&display=swap";*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box;font-family:Rubik,sans-serif}.container[_ngcontent-%COMP%]{width:100%;height:40vh;display:flex;justify-content:center;align-items:center;background-image:linear-gradient(109.6deg,rgba(62,161,219,1) 11.2%,rgba(93,52,236,1) 100.2%)}.circles[_ngcontent-%COMP%]{position:absolute;height:270px;width:450px;top:50%;left:50%;transform:translate(-50%,-50%)}.circle-1[_ngcontent-%COMP%]{position:absolute;top:-50px;border-radius:50%;background:radial-gradient(#006db3,#29b6f6);left:10px;height:160px;width:160px}.cardtemplate[_ngcontent-%COMP%]{width:380px;height:230px;border:2px solid rgba(255,255,255,.2);background:rgba(255,255,255,.4);border-radius:10px;z-index:1;overflow:hidden;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);position:relative}.visa_logo[_ngcontent-%COMP%]{float:right;padding:10px}.visa_logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:40px}.visa_info[_ngcontent-%COMP%]{padding:10px;margin:30px 0}.visa_info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:45px}.visa_info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:22px;padding:10px 0;letter-spacing:2px;color:#fff}.visa_crinfo[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 10px;color:#fff}.stripecard[_ngcontent-%COMP%]{margin:20px 0;font-size:24px;border:2px solid rgba(255,255,255,.2);background:rgba(255,255,255,.4);border-radius:10px;z-index:1;overflow:hidden;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);position:relative}.defaultcard[_ngcontent-%COMP%]{margin-left:20px;background-color:#00db00;color:#fff;font-size:10px;padding:0 10px;border-radius:20px;font-weight:600}.setdefaultcard[_ngcontent-%COMP%]{margin-left:20px;background-color:#006f9b;color:#fff;font-size:10px;padding:0 5px;border-radius:20px;font-weight:600;border:none}.deletecard[_ngcontent-%COMP%]{background-color:#ffadad;color:#df0000;font-size:10px;padding:0 3px;border-radius:3px;font-weight:600;border:none;cursor:pointer}.addcardbtn[_ngcontent-%COMP%]{background-color:#5d34ec;color:#fff;padding:0 10px;font-weight:900}.cancelbtn[_ngcontent-%COMP%]{font-weight:900}']}),a})()},5861:(x,v,c)=>{function l(d,i,g,r,p,h,_){try{var b=d[h](_),m=b.value}catch(S){return void g(S)}b.done?i(m):Promise.resolve(m).then(r,p)}function u(d){return function(){var i=this,g=arguments;return new Promise(function(r,p){var h=d.apply(i,g);function _(m){l(h,r,p,_,b,"next",m)}function b(m){l(h,r,p,_,b,"throw",m)}_(void 0)})}}c.d(v,{Z:()=>u})}}]);